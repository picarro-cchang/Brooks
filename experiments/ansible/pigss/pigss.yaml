- hosts: localhost
  vars_prompt:
  - name: "update"
    prompt: "Are you performing an update on previously provisioned device?\n0 - No\n1 - Yes\n"
    private: no
  - name: "githubuser"
    prompt: "Enter your github username"
    private: no
    when: update == "0"
  - name: "githubemail"
    prompt: "Enter your github email"
    private: no
    when: update == "0"
  - name: "grafanauser"
    prompt: "Enter the default grafana username"
    private: no
    when: update == "0"
  - name: "grafanapass"
    prompt: "Enter the default grafana password"
    private: yes
    when: update == "0"
  pre_tasks:
    - include: tasks/bootstrap.yaml
  tasks:
    - name: Set playbook vars
      set_fact: playbook_user="{{ lookup('env','USER') }}" playbook_home="{{  lookup('env','HOME')  }}"   
    - include: tasks/gnome.yaml
      when: headless == "false"
    - include: tasks/environmental-variables.yaml 
    - include: tasks/miniconda.yaml
    - include: tasks/non-apt-install.yaml
    - include: tasks/configure-git.yaml
    - include: tasks/pigss-meta.yaml
    - include: tasks/grafana-npm-gem.yaml
    - include: tasks/build-menu.yaml
