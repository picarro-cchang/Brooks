- name: Copy wallpaper
  copy: src=files/picarro_wallpaper.png dest={{ playbook_home }}/.wallpaper.png owner={{ playbook_user }} mode=0600

- name: Set favorite apps
  dconf:
    key: "/org/gnome/shell/favorite-apps"
    value: "['chromium-browser.desktop', 'org.gnome.Terminal.desktop', 'org.gnome.Nautilus.desktop', 'org.gnome.gedit.desktop']"
    state: present

- name: Enable Gnome Shell extensions
  dconf:
    key: "/org/gnome/shell/enabled-extensions"
    value: "['user-theme', 'user-theme@gnome-shell-extensions.gcampax.github.com']"
    state: present

- name: Set icon theme
  # dconf seems to have a bug that only allows us to read this register
  shell: gsettings set org.gnome.desktop.interface icon-theme 'Papirus'

- name: Set GTK theme
  dconf:
    key: "/org/gnome/desktop/interface/gtk-theme"
    value: "'Materia-dark-compact'"
    state: present

- name: Set Gnome Shell theme
  dconf:
    key: "/org/gnome/shell/extensions/user-theme/name"
    value: "'Materia-dark-compact'"
    state: present

- name: Set document font
# dconf seems to have a bug that only allows us to read this register
  shell: gsettings set org.gnome.desktop.interface document-font-name 'Roboto 11'

- name: Set interface font
# dconf seems to have a bug that only allows us to read this register
  shell: gsettings set org.gnome.desktop.interface font-name 'Roboto 10'

- name: Set monospace font
# dconf seems to have a bug that only allows us to read this register
  shell: gsettings set org.gnome.desktop.interface monospace-font-name 'Fira Code 11'

- name: Set window title font
# dconf seems to have a bug that only allows us to read this register
  shell: gsettings set org.gnome.desktop.wm.preferences titlebar-font 'Roboto 11'

- name: Set wallpaper
  dconf:
    key: "/org/gnome/desktop/background/picture-uri"
    value: "'file://{{ playbook_home }}/.wallpaper.png'"
    state: present

- name: Set background primary color
  dconf:
    key: "/org/gnome/desktop/background/primary-color"
    value: "'#ffffff'"
    state: present

- name: Set background secondary color
  dconf:
    key: "/org/gnome/desktop/background/secondary-color"
    value: "'#ffffff'"
    state: present

- name: Disable auto screen lock
  dconf:
    key: "/org/gnome/desktop/session/idle-delay"
    value: '0'
    state: present

- name: Disable desktop icons
  dconf:
    key: "/org/gnome/desktop/background/show-desktop-icons"
    value: 'false'
    state: present

- name: Prevent gnome from auto-opening file manager when media is plugged in
  dconf:
    key: "/org/gnome/desktop/media-handling/automount-open"
    value: 'false'
    state: present

- name: Prevent user from locking screen
  dconf:
    key: "/org/gnome/desktop/lockdown/disable-lock-screen"
    value: 'true'
    state: present

# Removed step to prevent user from logging out
# If we remove this feature, the user cannot shutdown/reboot the system
# It also allows them to put the system in a hibernate state that cannot
# be easily recovered from

- name: Disable gnome user administration
  dconf:
    key: "/org/gnome/desktop/lockdown/user-administration-disabled"
    value: 'true'
    state: present

- name: Prevent the user from switching users
  dconf:
    key: "/org/gnome/desktop/lockdown/disable-user-switching"
    value: 'true'
    state: present

- name: Disabling printing
  dconf:
    key: "/org/gnome/desktop/lockdown/disable-printing"
    value: 'true'
    state: present

- name: Disable print dialogs
  dconf:
    key: "/org/gnome/desktop/lockdown/disable-print-setup"
    value: 'true'
    state: present

- name: Disable banner notifications
  dconf:
    key: "/org/gnome/desktop/notifications/show-banner"
    value: 'false'
    state: present

- name: Disable lock-screen notifications
  dconf:
    key: "/org/gnome/desktop/notification/show-in-lock-screen"
    value: 'false'
    state: present

- name: Disable screensaver
  dconf:
    key: "/org/gnome/desktop/screensaver/idle-activation-enabled"
    value: 'false'
    state: present

- name: Disable screensaver auto-lock on wake
  dconf:
    key: "/org/gnome/desktop/screensaver/lock-enabled"
    value: 'false'
    state: present

- name: Set file browser default view to list-view
  dconf:
    key: "/org/gnome/nautilus/preferences/default-folder-viewer"
    value: "'list-view'"
    state: present

- name: Enable on-screen keyboard
  dconf:
    key: "/org/gnome/desktop/a11y/applications/screen-keyboard-enabled"
    value: 'true'
    state: present

- name: Disable geolocation
  dconf:
    key: "/org/gnome/system/location/enabled"
    value: 'false'
    state: present
