#!/usr/bin/env python
# -*- coding: iso-8859-15 -*-
# generated by wxGlade HG on Fri Jan 09 18:12:41 2009

import wx

# begin wxGlade: extracode
# end wxGlade

class CoordinatorFrameGui(wx.Frame):
    def __init__(self, hasSampleDescr, hasSampleNum, useSeptum, hasPause, paramTupleList, numDispParams, *args, **kwds):
        # Note: If you add params to this method, please update the App class below
        #       to support UI testing/development.
        # begin wxGlade: CoordinatorFrameGui.__init__
        kwds["style"] = wx.DEFAULT_FRAME_STYLE
        wx.Frame.__init__(self, *args, **kwds)
        self.useSeptum = useSeptum
        self.hasPause = hasPause
        self.hasSampleDescr = hasSampleDescr
        self.hasSampleNum = hasSampleNum
        self.panel_1 = wx.Panel(self, wx.ID_ANY)
        self.window_1 = wx.SplitterWindow(self.panel_1, wx.ID_ANY, style=wx.SP_3D|wx.SP_BORDER|wx.SP_LIVE_UPDATE)
        self.window_1_pane_2 = wx.Panel(self.window_1, wx.ID_ANY, style=wx.SUNKEN_BORDER|wx.TAB_TRAVERSAL)
        self.window_1_pane_1 = wx.Panel(self.window_1, wx.ID_ANY, style=wx.SUNKEN_BORDER|wx.TAB_TRAVERSAL)
        self.statusbar = self.CreateStatusBar(1, 0)
        self.label_1 = wx.StaticText(self.panel_1, wx.ID_ANY, "Filename:")
        self.filenameTextCtrl = wx.TextCtrl(self.panel_1, wx.ID_ANY, "")
        self.newFileButton = wx.Button(self.panel_1, -1, "New Output File...")
        if self.hasSampleDescr:
            self.loadSampleDescrButton = wx.Button(self.panel_1, -1, "Load Sample Descriptions...")
        else:
            self.loadSampleDescrButton = None
        if hasSampleNum:
            self.labelChangeSampleNum = wx.StaticText(self.panel_1, -1, "Run sample number:", style=wx.ALIGN_CENTRE)
            self.textCtrlChangeSampleNum = wx.TextCtrl(self.panel_1, -1, "1", style=wx.TE_PROCESS_ENTER|wx.TE_CENTRE)
        else:
            self.labelChangeSampleNum = None
            self.textCtrlChangeSampleNum = None
        if self.useSeptum:
            self.changeSeptumButton = wx.Button(self.panel_1, -1, "Change Septum")
        else:
            self.changeSeptumButton = None
        if self.hasPause:
            # Add a menu bar
            self.frameMenubar = wx.MenuBar()
            menuItem = wx.Menu()
            self.idPause = wx.NewId()
            self.idResume = wx.NewId()
            menuItem.Append(self.idPause, "&Pause", "", wx.ITEM_NORMAL)
            menuItem.Append(self.idResume, "&Resume", "", wx.ITEM_NORMAL)
            self.frameMenubar.Append(menuItem, "&Control")
            self.SetMenuBar(self.frameMenubar)

        self.paramLabelList = []
        self.paramTextCtrlList = []
        for idx in range(min(numDispParams, len(paramTupleList))):
            self.paramLabelList.append(wx.StaticText(self.panel_1, -1, paramTupleList[idx][1], style=wx.ALIGN_CENTRE))
            self.paramTextCtrlList.append(wx.TextCtrl(self.panel_1, -1, paramTupleList[idx][2], style=wx.TE_PROCESS_ENTER|wx.TE_CENTRE))
            self.paramTextCtrlList[-1].SetEditable(False)

        self.fileDataListCtrl = wx.ListCtrl(self.window_1_pane_1, wx.ID_ANY, style=wx.LC_REPORT|wx.LC_VRULES|wx.SUNKEN_BORDER)
        self.label_2 = wx.StaticText(self.window_1_pane_2, wx.ID_ANY, "Log")
        self.logTextCtrl = wx.TextCtrl(self.window_1_pane_2, wx.ID_ANY, "", style=wx.TE_MULTILINE)
        self.label_3 = wx.StaticText(self.panel_1, wx.ID_ANY, "Sample description (select or enter new description):")
        self.sampleDescrComboBox = wx.ComboBox(self.panel_1, wx.ID_ANY, choices=[], style=wx.CB_DROPDOWN)
        self.manualButton = wx.Button(self.panel_1, -1, "Injected")

        self.__set_properties()
        self.__do_layout()

        self.Bind(wx.EVT_BUTTON, self.onNewFile, self.newFileButton)

        if self.hasPause:
            self.Bind(wx.EVT_MENU, self.onPause, id = self.idPause)
            self.Bind(wx.EVT_MENU, self.onResume, id = self.idResume)
        if self.hasSampleDescr:
            self.Bind(wx.EVT_BUTTON, self.onLoadSampleDescriptions, self.loadSampleDescrButton)
        if hasSampleNum:
            self.Bind(wx.EVT_TEXT, self.onChangeSampleNum, self.textCtrlChangeSampleNum)
        if self.useSeptum:
            self.Bind(wx.EVT_BUTTON, self.onChangeSeptum, self.changeSeptumButton)
        self.Bind(wx.EVT_BUTTON, self.onManualButton, self.manualButton)
        # end wxGlade

    def __set_properties(self):
        # begin wxGlade: CoordinatorFrameGui.__set_properties
        self.SetTitle("CRDS Coordinator")
        self.statusbar.SetStatusWidths([-1])
        # statusbar fields
        statusbar_fields = ["coordinatorFrame_statusbar"]
        for i in range(len(statusbar_fields)):
            self.statusbar.SetStatusText(statusbar_fields[i], i)
        self.label_1.SetFont(wx.Font(8, wx.MODERN, wx.NORMAL, wx.NORMAL, 0, ""))
        self.filenameTextCtrl.SetFont(wx.Font(8, wx.MODERN, wx.NORMAL, wx.NORMAL, 0, ""))
        self.label_2.SetFont(wx.Font(8, wx.MODERN, wx.NORMAL, wx.NORMAL, 0, ""))
        self.logTextCtrl.SetFont(wx.Font(8, wx.MODERN, wx.NORMAL, wx.NORMAL, 0, ""))
        self.panel_1.SetMinSize((1024,480))
        # end wxGlade

    def __do_layout(self):
        # begin wxGlade: CoordinatorFrameGui.__do_layout
        #
        sizer_3 = wx.BoxSizer(wx.VERTICAL)
        sizer_1 = wx.BoxSizer(wx.VERTICAL)
        sizer_4 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_7 = wx.BoxSizer(wx.VERTICAL)
        sizer_9 = wx.BoxSizer(wx.VERTICAL)
        sizer_8 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_5 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_6 = wx.BoxSizer(wx.VERTICAL)
        sizer_2 = wx.BoxSizer(wx.HORIZONTAL)
        sizer_2.Add(self.label_1, 0, wx.LEFT|wx.TOP|wx.ALIGN_LEFT, 10)
        sizer_2.Add(self.filenameTextCtrl, 1, wx.LEFT|wx.TOP|wx.ALIGN_LEFT, 10)
        sizer_6.Add(sizer_2, 0, wx.EXPAND, 0)
        sizer_6.Add(self.newFileButton, 0, wx.ALL|wx.ALIGN_LEFT, 10)
        sizer_5.Add(sizer_6, 1, wx.EXPAND, 0)

        for idx in range(len(self.paramLabelList)):
            sizerParam = wx.BoxSizer(wx.VERTICAL)
            sizerParam.Add(self.paramLabelList[idx], 0, wx.LEFT|wx.RIGHT|wx.TOP|wx.ALIGN_CENTER_HORIZONTAL|wx.ALIGN_CENTER_VERTICAL, 10)
            sizerParam.Add(self.paramTextCtrlList[idx], 0, wx.ALL|wx.EXPAND, 10)
            sizer_5.Add(sizerParam, 0, wx.EXPAND, 10)

        if self.hasSampleDescr:
            sizer_5.Add(self.loadSampleDescrButton, 0, wx.LEFT|wx.TOP|wx.ALIGN_LEFT, 10)
        if self.hasSampleNum:
            sizerChangeSampleNum = wx.BoxSizer(wx.VERTICAL)
            sizerChangeSampleNum.Add(self.labelChangeSampleNum, 0, wx.LEFT|wx.RIGHT|wx.TOP|wx.ALIGN_CENTER_HORIZONTAL|wx.ALIGN_CENTER_VERTICAL, 10)
            sizerChangeSampleNum.Add(self.textCtrlChangeSampleNum, 0, wx.ALL|wx.EXPAND, 10)
            sizer_5.Add(sizerChangeSampleNum, 0, wx.EXPAND, 10)
        if self.useSeptum:
            sizer_useSeptum = wx.BoxSizer(wx.HORIZONTAL)
            sizer_useSeptum.Add(self.changeSeptumButton, 0, wx.RIGHT|wx.ALIGN_RIGHT, 10)
            sizer_5.Add(sizer_useSeptum, 0, wx.LEFT|wx.TOP|wx.ALIGN_LEFT, 10)
        sizer_1.Add(sizer_5, 0, wx.BOTTOM|wx.EXPAND, 5)
        sizer_8.Add(self.fileDataListCtrl, 1, wx.EXPAND, 5)
        self.window_1_pane_1.SetSizer(sizer_8)
        sizer_9.Add(self.label_2, 0, wx.TOP|wx.ALIGN_CENTER_HORIZONTAL, 10)
        sizer_9.Add(self.logTextCtrl, 1, wx.EXPAND, 5)
        self.window_1_pane_2.SetSizer(sizer_9)

        # Hack: wx.SplitterWindow is broken.  The sash (or splitter) always starts at the top
        # so that the upper pane is compressed to a few pixels tall.  The default setting
        # in the SplitterWindow is to put the split in the middle.  So the hack is to explicitly
        # set the sash position 150 pixels from the top and set the minimum pane size to
        # 50 pixels.
        #
        self.window_1.SplitHorizontally(self.window_1_pane_1, self.window_1_pane_2,150)
        self.window_1.SetMinimumPaneSize(50)

        sizer_1.Add(self.window_1, 1, wx.EXPAND, 5)
        sizer_7.Add(self.label_3, 0, wx.LEFT, 5)
        sizer_7.Add(self.sampleDescrComboBox, 1, wx.ALL|wx.EXPAND, 5)
        sizer_4.Add(sizer_7, 1, wx.EXPAND, 0)
        sizer_4.Add(self.manualButton, 0, wx.ALL|wx.ALIGN_LEFT|wx.ALIGN_BOTTOM, 5)
        sizer_1.Add(sizer_4, 0, wx.EXPAND, 0)
        self.panel_1.SetSizer(sizer_1)
        sizer_3.Add(self.panel_1, 1, wx.EXPAND, 0)
        self.SetSizer(sizer_3)
        sizer_3.Fit(self)
        self.Layout()
        # end wxGlade

    def onNewFile(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onNewFile' not implemented!"
        event.Skip()

    def onPause(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onPause' not implemented!"
        event.Skip()

    def onResume(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onResume' not implemented!"
        event.Skip()

    def onLoadSampleDescriptions(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onLoadSampleDescriptions' not implemented!"
        event.Skip()

    def onChangeSeptum(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onChangeSeptum' not implemented!"
        event.Skip()

    def onChangeSampleNum(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onChangeSampleNum' not implemented!"
        event.Skip()

    def onManualButton(self, event): # wxGlade: CoordinatorFrameGui.<event_handler>
        print "Event handler `onManualButton' not implemented!"
        event.Skip()

# end of class CoordinatorFrameGui

"""
if __name__ == "__main__":
    app = wx.PySimpleApp(0)
    wx.InitAllImageHandlers()

    # hasSampleDescr, hasSampleNum, useSeptum, hasPause, paramTupleList, numDispParams
    #coordinatorFrame = CoordinatorFrameGui(None, wx.ID_ANY, "")
    coordinatorFrame = CoordinatorFrameGui(True, True, True, False, None, 0)
    app.SetTopWindow(coordinatorFrame)
    coordinatorFrame.Show()
    app.MainLoop()
"""


class App(wx.App):
    def __init__(self, redirect=True, filename=None,
                 hasSampleDescr=True,
                 hasSampleNum=True,
                 useSeptum=True,
                 hasPause=False,
                 paramTupleList=None,
                 numDispParams=0):

        self.hasSampleDescr = hasSampleDescr
        self.hasSampleNum = hasSampleNum
        self.useSeptum = useSeptum
        self.hasPause = hasPause

        if paramTupleList is not None:
            self.paramTupleList = paramTupleList
        else:
            self.paramTupleList = ('param1', 'param2')

        self.numDispParams = numDispParams

        wx.App.__init__(self, redirect, filename)

    def OnInit(self):
        wx.InitAllImageHandlers()
        self.frame = CoordinatorFrameGui(self.hasSampleDescr,
                                         self.hasSampleNum,
                                         self.useSeptum,
                                         self.hasPause,
                                         self.paramTupleList,
                                         self.numDispParams,
                                         parent=None)
        self.frame.Show()
        self.SetTopWindow(self.frame)

        return True


def main():
    # wx.PySimpleApp() is being deprecated
    #app = wx.PySimpleApp()
    #TestFrame().Show()

    # Set this to False so output goes to cmd window it was run from
    # True opens a new cmd window for the output.
    redirect = False

    # Params passed on to CoordinatorFrameGui
    paramTupleList = None
    paramTupleList = ('Line', 'Analysis', 'Time Code')
    numDispParams = 3

    app = App(redirect=redirect,
              hasSampleDescr=True,
              hasSampleNum=True,
              useSeptum=True,
              hasPause=True,
              paramTupleList=paramTupleList,
              numDispParams=numDispParams)
    app.MainLoop()

if __name__ == "__main__":
    main()

